require conf/machine/am57xx-evm.conf

KERNEL_DEVICETREE = "am572x-idk.dtb"

PREFERRED_PROVIDER_virtual/bootloader = "u-boot-ledge"
PREFERRED_PROVIDER_u-boot = "u-boot-ledge"
unset UBOOT_MACHINE
UBOOT_CONFIG = "trusted"
UBOOT_CONFIG[trusted] = "ledge-ti-am572x_defconfig,,u-boot.img"
EXTRA_IMAGEDEPENDS_remove = "u-boot"

MACHINE_EXTRA_RRECOMMENDS = "prueth-fw"
MACHINE_FEATURES += "tsn"

MACHINE_EXTRA_RDEPENDS += " \
    edk2-efi-prebuild-fw \
    "

RDEPENDS_${KERNEL_PACKAGE_NAME}-base_append_ledge-ti-am572x = " prueth-fw"
FILES_${KERNEL_PACKAGE_NAME}-devicetree_append_ledge-ti-am572x += "/${KERNEL_IMAGEDEST}/*.itb"
